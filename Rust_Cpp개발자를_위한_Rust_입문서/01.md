# C++ 개발자를 위한 Rust 입문서

저자: 최흥배, Claude

-----      
  
# 1장. Rust와의 첫 만남

## 1.1 C++와 Rust의 차이점 개요

### 주요 차이점들
**메모리 안전성**
- **C++**: 개발자가 직접 `new`/`delete`, `malloc`/`free` 관리
- **Rust**: 소유권 시스템으로 컴파일 타임에 메모리 안전성 보장

```cpp
// C++: 메모리 누수 가능성
void cpp_example() {
    int* ptr = new int(42);
    // delete를 깜빡하면 메모리 누수!
    // delete ptr;
}
```

```rust
// Rust: 자동으로 메모리 해제
fn rust_example() {
    let ptr = Box::new(42);
    // 스코프를 벗어나면 자동으로 메모리 해제
}
```

**널 포인터 안전성**
- **C++**: `nullptr` 역참조로 인한 크래시 위험
- **Rust**: `Option<T>` 타입으로 널 값을 명시적으로 처리

**동시성 안전성**
- **C++**: 데이터 레이스를 런타임에 발견
- **Rust**: 컴파일 타임에 데이터 레이스 방지

**패키지 관리**
- **C++**: 다양한 빌드 시스템 (CMake, Make, Bazel 등)
- **Rust**: 통합된 패키지 매니저 Cargo
  
</br>    
  

## 1.2 개발 환경 설정 (rustc, cargo)

### Rust 설치
**Windows에서 설치:**
1. https://rustup.rs/ 방문
2. `rustup-init.exe` 다운로드 및 실행
3. 기본 설정으로 설치 진행

**Linux/macOS에서 설치:**
```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source ~/.cargo/env
```

### 설치 확인
터미널에서 다음 명령어들을 실행해서 올바르게 설치되었는지 확인해보자:

```bash
# Rust 컴파일러 버전 확인
rustc --version

# Cargo (패키지 매니저) 버전 확인
cargo --version

# 도구 체인 확인
rustup --version
```

정상적으로 설치되었다면 다음과 같은 출력을 볼 수 있다:

```
rustc 1.75.0 (82e1608df 2023-12-21)
cargo 1.75.0 (1d8b05cdd 2023-11-20)
rustup 1.26.0 (5af9b9484 2023-04-05)
```

### 개발 도구 추천
**Visual Studio Code 확장:**
- `rust-analyzer`: 코드 완성, 에러 검사, 리팩토링
- `CodeLLDB`: 디버깅 지원  
[Rust와 VS Code 설치하기](https://wikidocs.net/265184 )    
  
**다른 IDE 옵션:**
- Rust Rover
- Vim/Neovim (rust.vim, coc-rust-analyzer)
   
</br>    
  

## 1.3 첫 번째 프로그램: Hello World
C++에서 Hello World를 만드는 것처럼 간단하지만, 몇 가지 차이점이 있다.

### 단일 파일로 실행
먼저 `hello.rs` 파일을 만들어보자:

```rust
fn main() {
    println!("Hello, World!");
}
```

컴파일하고 실행하기:

```bash
# 컴파일
rustc hello.rs

# 실행 (Windows)
hello.exe

# 실행 (Linux/macOS)
./hello
```

### C++와의 비교

```cpp
// C++
#include <iostream>

int main() {
    std::cout << "Hello, World!" << std::endl;
    return 0;
}
```

```rust
// Rust
fn main() {
    println!("Hello, World!");
}
```

**주요 차이점들:**
- `#include` 대신 `use` 키워드 사용 (이 예제에서는 필요 없음)
- `std::cout` 대신 `println!` 매크로 사용
- `return 0` 생략 가능 (기본적으로 성공 코드 반환)
- 함수 정의에 `fn` 키워드 사용
 
### 매크로와 함수의 차이
`println!`에서 `!`가 붙은 것을 주목해. 이것은 매크로라는 의미다:

```rust
fn main() {
    println!("This is a macro!");  // 매크로
    
    // 이런 함수는 존재하지 않음
    // println("This won't work");  // 컴파일 에러
}
```
  
</br>    
  
  
## 1.4 Cargo 프로젝트 생성과 빌드
Cargo는 Rust의 공식 빌드 도구이자 패키지 매니저다. C++의 CMake + vcpkg + 빌드 스크립트를 하나로 합친 것과 비슷하다.
  
### 새 프로젝트 생성

```bash
# 새 프로젝트 생성
cargo new hello_cargo
cd hello_cargo

# 프로젝트 구조 확인
tree  # 또는 ls -la
```

생성된 프로젝트 구조:

```
hello_cargo/
├── Cargo.toml    # 프로젝트 설정 파일 (CMakeLists.txt와 유사)
├── src/
│   └── main.rs   # 메인 소스 파일
└── .gitignore    # Git 무시 파일
```

### Cargo.toml 살펴보기
`Cargo.toml` 파일은 프로젝트의 메타데이터와 의존성을 정의한다:

```toml
[package]
name = "hello_cargo"
version = "0.1.0"
edition = "2021"

[dependencies]
# 여기에 외부 라이브러리 의존성을 추가
```

### 기본 main.rs
Cargo가 생성한 기본 코드를 살펴보자:

```rust
fn main() {
    println!("Hello, world!");
}
```

### Cargo 명령어들

```bash
# 프로젝트 빌드 (debug 모드)
cargo build

# 빌드하고 실행
cargo run

# 릴리스 빌드 (최적화됨)
cargo build --release

# 코드 검사 (빌드하지 않고 컴파일 가능한지만 확인)
cargo check

# 테스트 실행
cargo test

# 의존성 업데이트
cargo update

# 프로젝트 정리 (빌드 결과물 삭제)
cargo clean
```

### 실제 예제: 개선된 Hello World
기본 Hello World를 조금 더 흥미롭게 만들어보자:

```rust
fn main() {
    let name = "Rust";
    let version = "1.75";
    
    println!("Hello, {}!", name);
    println!("Welcome to {} version {}", name, version);
    
    // 여러 줄 출력
    println!("
        Rust의 특징:
        - 메모리 안전성
        - 동시성 안전성
        - 제로 비용 추상화
    ");
    
    // 계산 결과 출력
    let result = 2 + 3;
    println!("2 + 3 = {}", result);
}
```

실행해보기:

```bash
cargo run
```

출력 결과:
```
Hello, Rust!
Welcome to Rust version 1.75

        Rust의 특징:
        - 메모리 안전성
        - 동시성 안전성
        - 제로 비용 추상화
    
2 + 3 = 5
```

### 빌드 결과물 확인
빌드 후 프로젝트 구조:

```
hello_cargo/
├── Cargo.toml
├── Cargo.lock      # 의존성 잠금 파일 (자동 생성)
├── src/
│   └── main.rs
└── target/         # 빌드 결과물
    ├── debug/      # 디버그 빌드
    │   └── hello_cargo(.exe)
    └── release/    # 릴리스 빌드 (--release 옵션 시)
        └── hello_cargo(.exe)
```

### C++ 프로젝트와의 비교
**C++ 프로젝트 (CMake 사용 시):**
```
cpp_project/
├── CMakeLists.txt
├── src/
│   └── main.cpp
├── build/          # 수동으로 생성
└── external/       # 외부 라이브러리 수동 관리
```

**Rust 프로젝트 (Cargo 사용):**
```
rust_project/
├── Cargo.toml
├── src/
│   └── main.rs
└── target/         # 자동 생성 및 관리
```

Cargo의 장점은 의존성 관리, 빌드, 테스트, 문서 생성까지 모든 것을 하나의 도구로 처리할 수 있다는 것이야.

---
  
**이번 장 요약:**
1. Rust는 메모리 안전성과 동시성 안전성을 컴파일 타임에 보장해
2. `rustup`으로 쉽게 설치하고 관리할 수 있어
3. `println!`는 매크로이며, `!`가 붙는 것이 특징이야
4. Cargo는 올인원 프로젝트 관리 도구야
5. `cargo new`로 프로젝트를 만들고 `cargo run`으로 실행해
  
  