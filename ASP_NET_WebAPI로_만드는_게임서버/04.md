# ASP.NET Core Web APIë¡œ ê²Œì„ ì„œë²„ ê°œë°œ
  
ì €ì: ìµœí¥ë°°, Claude AI   
-----------------------    
  
# Chapter 4. .http íŒŒì¼ì„ ì´ìš©í•œ API í…ŒìŠ¤íŠ¸
    
## 4.1 .http íŒŒì¼ ì†Œê°œ ë° ì‘ì„±ë²•
HTTP ìš”ì²­ì„ í…ŒìŠ¤íŠ¸í•  ë•Œ Postmanì´ë‚˜ Insomnia ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ê³¤ í•œë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŸ° ë„êµ¬ë“¤ì€ ë³„ë„ë¡œ ì„¤ì¹˜í•´ì•¼ í•˜ê³  ìš”ì²­ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ í”„ë¡œì íŠ¸ ì½”ë“œì™€ ë¶„ë¦¬ë˜ì–´ ìˆë‹¤. ë³´ë‹¤ íš¨ìœ¨ì ì¸ ë°©ë²•ìœ¼ë¡œ .http íŒŒì¼ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### .http íŒŒì¼ì´ë€?
.http íŒŒì¼ì€ HTTP ìš”ì²­ì„ í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•˜ì—¬ ì €ì¥í•œ ë‹¨ìˆœí•œ íŒŒì¼ì´ë‹¤. Visual Studio Codeì˜ REST Client í™•ì¥ í”„ë¡œê·¸ë¨ê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ë³„ë„ì˜ API í…ŒìŠ¤íŠ¸ ë„êµ¬ ì—†ì´ë„ HTTP ìš”ì²­ì„ ì‹¤í–‰í•˜ê³  ì‘ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### ê¸°ë³¸ ë¬¸ë²•
.http íŒŒì¼ì˜ ê¸°ë³¸ ë¬¸ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:

```http
[HTTP ë©”ì„œë“œ] [URL] HTTP/[ë²„ì „]
[í—¤ë” í•„ë“œ]: [í—¤ë” ê°’]

[ìš”ì²­ ë³¸ë¬¸]
```

ê²Œì„ ì„œë²„ API í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê°„ë‹¨í•œ ì˜ˆì œ:

```http
POST https://game-api.example.com/api/player/login HTTP/1.1
Content-Type: application/json

{
  "username": "player1",
  "password": "secret123"
}
```

### ì—¬ëŸ¬ ìš”ì²­ ì‘ì„±í•˜ê¸°
í•˜ë‚˜ì˜ .http íŒŒì¼ì— ì—¬ëŸ¬ ìš”ì²­ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ìš”ì²­ ì‚¬ì´ì—ëŠ” `###`ë¥¼ êµ¬ë¶„ìë¡œ ì‚¬ìš©í•œë‹¤:

```http
POST https://game-api.example.com/api/player/login HTTP/1.1
Content-Type: application/json

{
  "username": "player1",
  "password": "secret123"
}

###

POST https://game-api.example.com/api/player/inventory HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "playerId": 12345
}
```

### ë³€ìˆ˜ ì‚¬ìš©í•˜ê¸°
.http íŒŒì¼ì—ì„œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ì´ì „ ì‘ë‹µì—ì„œ ë°›ì€ ê°’(ì˜ˆ: ì¸ì¦ í† í°)ì„ í›„ì† ìš”ì²­ì— ì‚¬ìš©í•  ë•Œ ìœ ìš©í•˜ë‹¤:

```http
# @name login
POST https://localhost:5001/api/auth/login HTTP/1.1
Content-Type: application/json

{
  "username": "player1",
  "password": "secret123"
}

###

@authToken = {{login.response.body.token}}
POST https://localhost:5001/api/player/characters HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "action": "list"
}
```
  
#### ì²« ë²ˆì§¸ ìš”ì²­: ë¡œê·¸ì¸ (Login) ğŸ”‘

```http
# @name login
POST https://localhost:5001/api/auth/login HTTP/1.1
Content-Type: application/json

{
Â  "username": "player1",
Â  "password": "secret123"
}
```

  * `# @name login`: ì´ ìš”ì²­ì˜ ì´ë¦„ì„ **login**ìœ¼ë¡œ ì§€ì •í•œë‹¤. ì´ë ‡ê²Œ ì´ë¦„ì„ ë¶™ì—¬ë‘ë©´ ë‚˜ì¤‘ì— ë‹¤ë¥¸ ìš”ì²­ì—ì„œ ì´ ìš”ì²­ì˜ ê²°ê³¼ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.
  
ì´ ìš”ì²­ì´ ì„±ê³µí•˜ë©´ ì„œë²„ëŠ” ì‘ë‹µìœ¼ë¡œ **ì¸ì¦ í† í°(Access Token)**ì„ ë³´ë‚´ì¤„ ê²ƒì´ë‹¤.


#### ë‘ ë²ˆì§¸ ìš”ì²­: ìºë¦­í„° ëª©ë¡ ì¡°íšŒ (Get Characters) ğŸ“œ

```http
@authToken = {{login.response.body.token}}
POST https://localhost:5001/api/player/characters HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
Â  "action": "list"
}
```

  * `@authToken = {{login.response.body.token}}`: **ê°€ì¥ í•µì‹¬ì ì¸ ë¶€ë¶„**ì´ë‹¤.
      * `@authToken`: `authToken`ì´ë¼ëŠ” ì´ë¦„ì˜ **ë³€ìˆ˜ë¥¼ ì„ ì–¸**í•œë‹¤.
      * `{{login.response.body.token}}`: **`login`ì´ë¼ëŠ” ì´ë¦„ì˜ ìš”ì²­**(`@name login`)ì´ ì‹¤í–‰ëœ í›„, ê·¸ **ì‘ë‹µ(response)ì˜ ë³¸ë¬¸(body)**ì— ìˆëŠ” `token`ì´ë¼ëŠ” ì´ë¦„ì˜ JSON í•„ë“œ ê°’ì„ ê°€ì ¸ì™€ `@authToken` ë³€ìˆ˜ì— ì €ì¥í•˜ë¼ëŠ” ì˜ë¯¸ì´ë‹¤.
  * `Authorization: Bearer {{authToken}}`: HTTP **Authorization í—¤ë”**ë¥¼ ì¶”ê°€í•œë‹¤.
      * `{{authToken}}`: ìœ„ì—ì„œ ì €ì¥í•œ **`@authToken` ë³€ìˆ˜ì˜ ê°’ì„ ì´ê³³ì— ì‚½ì…**í•˜ì—¬ "Bearer [ì‹¤ì œí† í°ê°’]" í˜•íƒœë¡œ ì¸ì¦ ì •ë³´ë¥¼ ì„œë²„ì— ì „ë‹¬í•œë‹¤.
  
  

### í™˜ê²½ ì„¤ì •
ë‹¤ì–‘í•œ í™˜ê²½(ê°œë°œ, í…ŒìŠ¤íŠ¸, í”„ë¡œë•ì…˜)ì— ëŒ€í•œ ì„¤ì •ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤:

```http
@hostname = localhost
@port = 5001
@baseUrl = https://{{hostname}}:{{port}}
@contentType = application/json

###

POST {{baseUrl}}/api/game/start HTTP/1.1
Content-Type: {{contentType}}

{
  "gameMode": "story",
  "difficultyLevel": "normal"
}
```

í™˜ê²½ë³„ ì„¤ì •ì€ `.vscode` í´ë”ì— `settings.json` íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤:

```json
{
  "rest-client.environmentVariables": {
    "$shared": {
      "contentType": "application/json"
    },
    "development": {
      "hostname": "localhost",
      "port": "5001",
      "baseUrl": "https://localhost:5001"
    },
    "production": {
      "hostname": "api.mygame.com",
      "port": "443",
      "baseUrl": "https://api.mygame.com"
    }
  }
}
```
  

## 4.2 REST Client í™•ì¥ í”„ë¡œê·¸ë¨ í™œìš©

### ì„¤ì¹˜ ë°©ë²•
Visual Studio Codeì—ì„œ REST Client í™•ì¥ í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•:

1. VS Code ì‹¤í–‰
2. í™•ì¥ í”„ë¡œê·¸ë¨ ì•„ì´ì½˜ í´ë¦­(ë˜ëŠ” Ctrl+Shift+X)
3. ê²€ìƒ‰ì°½ì— "REST Client" ì…ë ¥
4. Huachao Maoê°€ ê°œë°œí•œ REST Client í™•ì¥ í”„ë¡œê·¸ë¨ ì„¤ì¹˜
5. VS Code ì¬ì‹œì‘

### ì£¼ìš” ê¸°ëŠ¥
REST Client í™•ì¥ í”„ë¡œê·¸ë¨ì˜ ì£¼ìš” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:

1. **ìš”ì²­ ì „ì†¡**: .http íŒŒì¼ì—ì„œ ìš”ì²­ ìœ„ì— "Send Request" ë§í¬ê°€ í‘œì‹œëœë‹¤. ì´ë¥¼ í´ë¦­í•˜ê±°ë‚˜ ë‹¨ì¶•í‚¤(Ctrl+Alt+R)ë¥¼ ì‚¬ìš©í•´ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.

2. **ì‘ë‹µ ë³´ê¸°**: ìš”ì²­ ì‹¤í–‰ í›„ ìƒˆ íƒ­ì—ì„œ ì‘ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì‘ë‹µì€ ìƒíƒœ ì½”ë“œ, í—¤ë”, ë³¸ë¬¸ìœ¼ë¡œ êµ¬ë¶„ë˜ì–´ í‘œì‹œëœë‹¤.

3. **ì½”ë“œ ìƒì„±**: ìš”ì²­ì„ ë‹¤ì–‘í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´(C#, JavaScript ë“±)ì˜ ì½”ë“œë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.

4. **ìš”ì²­ ê¸°ë¡**: ìµœê·¼ ì‹¤í–‰í•œ ìš”ì²­ì˜ ê¸°ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

5. **í™˜ê²½ ì „í™˜**: í•˜ë‹¨ ìƒíƒœ í‘œì‹œì¤„ì—ì„œ í™˜ê²½(ê°œë°œ, í…ŒìŠ¤íŠ¸, í”„ë¡œë•ì…˜ ë“±)ì„ ì‰½ê²Œ ì „í™˜í•  ìˆ˜ ìˆë‹¤.
 
### ë‹¨ì¶•í‚¤

| ê¸°ëŠ¥ | ë‹¨ì¶•í‚¤ |
|------|--------|
| ìš”ì²­ ë³´ë‚´ê¸° | Ctrl+Alt+R |
| í˜„ì¬ ìš”ì²­ë§Œ ë³´ë‚´ê¸° | Ctrl+Alt+C |
| ìš”ì²­ ì·¨ì†Œ | Ctrl+Alt+K |
| ì½”ë“œ ìƒì„± | Ctrl+Alt+G |
| í™˜ê²½ ë³€ê²½ | Ctrl+Alt+E |

### .http íŒŒì¼ í…ŒìŠ¤íŠ¸ ì˜ˆì œ
ë‹¤ìŒì€ Visual Studio Codeì—ì„œ .http íŒŒì¼ì„ ì‚¬ìš©í•´ ê²Œì„ ì„œë²„ APIë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” í™”ë©´ì´ë‹¤:   
![vscodeì—ì„œ .http íŒŒì¼ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í™”ë©´](./images/004.png)   
    

## 4.3 API ìš”ì²­/ì‘ë‹µ í…ŒìŠ¤íŠ¸ íŒ¨í„´
ê²Œì„ ì„œë²„ API í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì¼ë°˜ì ì¸ íŒ¨í„´ì„ ì‚´í´ë³´ì. ì´ëŸ¬í•œ íŒ¨í„´ì„ .http íŒŒì¼ì— ì ìš©í•˜ì—¬ íš¨ìœ¨ì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

### ê¸°ë³¸ í…ŒìŠ¤íŠ¸ íŒ¨í„´
ê²Œì„ ì„œë²„ API í…ŒìŠ¤íŠ¸ì˜ ê¸°ë³¸ íŒ¨í„´ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:

1. **ì¸ì¦**: ì‚¬ìš©ì ë¡œê·¸ì¸ ë˜ëŠ” í† í° ë°œê¸‰
2. **ìì› ì ‘ê·¼**: ì¸ì¦ í† í°ì„ ì‚¬ìš©í•œ API í˜¸ì¶œ
3. **ê²€ì¦**: ì‘ë‹µ í™•ì¸ ë° í›„ì† í…ŒìŠ¤íŠ¸

ì´ë¥¼ .http íŒŒì¼ë¡œ êµ¬í˜„í•œ ì˜ˆì œ:

```http
# 1. í”Œë ˆì´ì–´ ë¡œê·¸ì¸
# @name login
POST https://localhost:5001/api/auth/login HTTP/1.1
Content-Type: application/json

{
  "username": "player1",
  "password": "secret123"
}
  
###

# 2. í† í° ì €ì¥ ë° ìºë¦­í„° ëª©ë¡ ì¡°íšŒ
@authToken = {{login.response.body.token}}
# @name getCharacters
POST https://localhost:5001/api/character/list HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "playerId": 12345
}

###

# 3. íŠ¹ì • ìºë¦­í„° ìƒì„¸ ì •ë³´ ì¡°íšŒ
@characterId = {{getCharacters.response.body.characters[0].id}}
POST https://localhost:5001/api/character/detail HTTP/1.1
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "characterId": {{characterId}}
}
```

### ê²Œì„ ì„œë²„ API í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ íŒŒì¼ êµ¬ì¡°
íš¨ìœ¨ì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ .http íŒŒì¼ì„ API ê¸°ëŠ¥ë³„ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤:

```
/api-tests
  â”œâ”€â”€ auth.http       # ì¸ì¦ ê´€ë ¨ API
  â”œâ”€â”€ player.http     # í”Œë ˆì´ì–´ í”„ë¡œí•„ ê´€ë ¨ API
  â”œâ”€â”€ character.http  # ìºë¦­í„° ê´€ë ¨ API
  â”œâ”€â”€ inventory.http  # ì¸ë²¤í† ë¦¬ ê´€ë ¨ API
  â”œâ”€â”€ item.http       # ì•„ì´í…œ ê´€ë ¨ API
  â”œâ”€â”€ shop.http       # ìƒì  ê´€ë ¨ API
  â”œâ”€â”€ gacha.http      # ê°€ì± (ë½‘ê¸°) ê´€ë ¨ API
  â””â”€â”€ battle.http     # ì „íˆ¬ ê´€ë ¨ API
```

ë˜í•œ ê³µí†µ í™˜ê²½ ë³€ìˆ˜ëŠ” `http-client.env.json` íŒŒì¼ì— ì •ì˜í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤:

```json
{
  "development": {
    "baseUrl": "https://localhost:5001",
    "contentType": "application/json",
    "testUser": "player1",
    "testPassword": "secret123"
  },
  "staging": {
    "baseUrl": "https://staging-api.mygame.com",
    "contentType": "application/json",
    "testUser": "player1",
    "testPassword": "secret123"
  }
}
```

### ì¸ì¦ í…ŒìŠ¤íŠ¸ íŒ¨í„´
ê²Œì„ ì„œë²„ APIì—ì„œ ì¸ì¦ì€ ë§¤ìš° ì¤‘ìš”í•œ ë¶€ë¶„ì´ë‹¤. ë‹¤ìŒì€ ì¸ì¦ ê´€ë ¨ í…ŒìŠ¤íŠ¸ íŒ¨í„´ì˜ ì˜ˆì´ë‹¤:

```http
# @name login
POST {{baseUrl}}/api/auth/login HTTP/1.1
Content-Type: {{contentType}}

{
  "username": "{{testUser}}",
  "password": "{{testPassword}}"
}

###

# í† í° ì¶”ì¶œ ë° ì €ì¥
@authToken = {{login.response.body.token}}

###

# ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ ì‹œë„
POST {{baseUrl}}/api/auth/login HTTP/1.1
Content-Type: {{contentType}}

{
  "username": "{{testUser}}",
  "password": "wrongpassword"
}

###

# í† í° ê°±ì‹ 
POST {{baseUrl}}/api/auth/refresh HTTP/1.1
Content-Type: {{contentType}}

{
  "refreshToken": "{{login.response.body.refreshToken}}"
}

###

# ë¡œê·¸ì•„ì›ƒ
POST {{baseUrl}}/api/auth/logout HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": 12345
}
```

### ê²Œì„ ë°ì´í„° CRUD í…ŒìŠ¤íŠ¸ íŒ¨í„´
ê²Œì„ ë‚´ ë°ì´í„°ì— ëŒ€í•œ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ í…ŒìŠ¤íŠ¸ íŒ¨í„´ì˜ ì˜ˆ:

```http
# 1. ìºë¦­í„° ìƒì„±
# @name createCharacter
POST {{baseUrl}}/api/character/create HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": 12345,
  "characterType": "Warrior",
  "name": "ìš©ì‚¬123"
}

###

# 2. ìƒì„±ëœ ìºë¦­í„° ID ì €ì¥
@newCharacterId = {{createCharacter.response.body.characterId}}

###

# 3. ìºë¦­í„° ìƒì„¸ ì •ë³´ ì¡°íšŒ
# @name getCharacter
POST {{baseUrl}}/api/character/detail HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "characterId": {{newCharacterId}}
}

###

# 4. ìºë¦­í„° ì •ë³´ ì—…ë°ì´íŠ¸
POST {{baseUrl}}/api/character/update HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "characterId": {{newCharacterId}},
  "name": "ê°•í•œìš©ì‚¬123"
}

###

# 5. ìºë¦­í„° ì‚­ì œ
POST {{baseUrl}}/api/character/delete HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "characterId": {{newCharacterId}}
}
```
  
### ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ íŒ¨í„´
APIì˜ ë‹¤ì–‘í•œ ì—ëŸ¬ ìƒí™©ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ íŒ¨í„´:

```http
# 1. ì¡´ì¬í•˜ì§€ ì•ŠëŠ” API ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œ
POST {{baseUrl}}/api/nonexistent HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "someData": "value"
}

###

# 2. í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½
POST {{baseUrl}}/api/character/detail HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  // characterId íŒŒë¼ë¯¸í„° ëˆ„ë½
}

###

# 3. ìœ íš¨í•˜ì§€ ì•Šì€ í† í°
POST {{baseUrl}}/api/character/list HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer invalid_token

{
  "playerId": 12345
}

###

# 4. ê¶Œí•œ ì—†ëŠ” ìì› ì ‘ê·¼
POST {{baseUrl}}/api/admin/users HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "action": "list"
}
```

### í…ŒìŠ¤íŠ¸ ìë™í™”ë¥¼ ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸ í™œìš©
ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ Node.jsì™€ REST Clientì˜ CLI ë²„ì „ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë‹¤ìŒì€ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ì˜ ì˜ˆì´ë‹¤:

```js
// test-runner.js
const { exec } = require('child_process');
const fs = require('fs');
const path = require('path');

const testDir = path.join(__dirname, 'api-tests');
const files = fs.readdirSync(testDir).filter(file => file.endsWith('.http'));

async function runTests() {
  console.log('Starting API tests...');
  
  for (const file of files) {
    console.log(`Running tests in ${file}...`);
    const filePath = path.join(testDir, file);
    
    try {
      await new Promise((resolve, reject) => {
        exec(`rest-client ${filePath} --env development`, (error, stdout, stderr) => {
          if (error) {
            console.error(`Error in ${file}:`, stderr);
            reject(error);
            return;
          }
          
          console.log(stdout);
          resolve();
        });
      });
      
      console.log(`Tests in ${file} completed successfully.`);
    } catch (error) {
      console.error(`Tests in ${file} failed.`);
    }
  }
  
  console.log('All tests completed.');
}

runTests();
```
  
 
## 4.4 ì¢…í•© .http íŒŒì¼ ì˜ˆì œ
ëª¨ë°”ì¼ ìˆ˜ì§‘í˜• RPG ê²Œì„ ì„œë²„ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì¢…í•©ì ì¸ .http íŒŒì¼ ì˜ˆì œ:   
    
```  
@baseUrl = https://localhost:5001
@contentType = application/json

################################
# ì‚¬ìš©ì ì¸ì¦ í…ŒìŠ¤íŠ¸
################################

# íšŒì›ê°€ì…
# @name register
POST {{baseUrl}}/api/auth/register HTTP/1.1
Content-Type: {{contentType}}

{
  "username": "newplayer",
  "email": "player@example.com",
  "password": "strongpassword123"
}

###

# ë¡œê·¸ì¸
# @name login
POST {{baseUrl}}/api/auth/login HTTP/1.1
Content-Type: {{contentType}}

{
  "username": "newplayer",
  "password": "strongpassword123"
}

###

# í† í° ì¶”ì¶œ ë° ì €ì¥
@authToken = {{login.response.body.token}}
@refreshToken = {{login.response.body.refreshToken}}
@playerId = {{login.response.body.playerId}}

###

# í† í° ê°±ì‹ 
# @name refreshToken
POST {{baseUrl}}/api/auth/refresh HTTP/1.1
Content-Type: {{contentType}}

{
  "refreshToken": "{{refreshToken}}"
}

###

# ìƒˆ í† í° ì €ì¥
@newAuthToken = {{refreshToken.response.body.token}}

################################
# í”Œë ˆì´ì–´ í”„ë¡œí•„ í…ŒìŠ¤íŠ¸
################################

# í”Œë ˆì´ì–´ ì •ë³´ ì¡°íšŒ
# @name playerInfo
POST {{baseUrl}}/api/player/info HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}}
}

###

# í”Œë ˆì´ì–´ ë‹‰ë„¤ì„ ë³€ê²½
POST {{baseUrl}}/api/player/update-nickname HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}},
  "nickname": "ë“œë˜ê³¤ìŠ¬ë ˆì´ì–´"
}

################################
# ìºë¦­í„° ê´€ë¦¬ í…ŒìŠ¤íŠ¸
################################

# ìºë¦­í„° ëª©ë¡ ì¡°íšŒ
# @name characterList
POST {{baseUrl}}/api/character/list HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}}
}

###

# ìƒˆ ìºë¦­í„° ìƒì„±
# @name createCharacter
POST {{baseUrl}}/api/character/create HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}},
  "characterType": "Archer",
  "name": "ì—˜í”„ê¶ìˆ˜"
}

###

# ìƒì„±ëœ ìºë¦­í„° ID ì €ì¥
@characterId = {{createCharacter.response.body.characterId}}

###

# ìºë¦­í„° ìƒì„¸ ì •ë³´ ì¡°íšŒ
# @name characterDetail
POST {{baseUrl}}/api/character/detail HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "characterId": {{characterId}}
}

###

# ìºë¦­í„° ë ˆë²¨ì—…
POST {{baseUrl}}/api/character/levelup HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "characterId": {{characterId}}
}

################################
# ì¸ë²¤í† ë¦¬ í…ŒìŠ¤íŠ¸
################################

# ì¸ë²¤í† ë¦¬ ì¡°íšŒ
# @name inventory
POST {{baseUrl}}/api/inventory/list HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}}
}

###

# ì•„ì´í…œ ì‚¬ìš©
POST {{baseUrl}}/api/inventory/use-item HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}},
  "itemId": 10001,
  "quantity": 1,
  "targetCharacterId": {{characterId}}
}

################################
# ìƒì  í…ŒìŠ¤íŠ¸
################################

# ìƒì  ëª©ë¡ ì¡°íšŒ
# @name shopList
POST {{baseUrl}}/api/shop/list HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "shopType": "regular"
}

###

# ì•„ì´í…œ êµ¬ë§¤
POST {{baseUrl}}/api/shop/purchase HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}},
  "itemId": 20001,
  "quantity": 1,
  "currency": "gold"
}

################################
# ê°€ì± (ë½‘ê¸°) í…ŒìŠ¤íŠ¸
################################

# ê°€ì±  ëª©ë¡ ì¡°íšŒ
# @name gachaList
POST {{baseUrl}}/api/gacha/list HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}}
}

###

# ê°€ì±  1íšŒ ë½‘ê¸°
# @name gachaDraw
POST {{baseUrl}}/api/gacha/draw HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}},
  "gachaId": 1,
  "drawType": "single"
}

###

# ê°€ì±  10íšŒ ë½‘ê¸°
POST {{baseUrl}}/api/gacha/draw HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}},
  "gachaId": 1,
  "drawType": "multi"
}

################################
# ì „íˆ¬ í…ŒìŠ¤íŠ¸
################################

# ìŠ¤í…Œì´ì§€ ì •ë³´ ì¡°íšŒ
# @name stageInfo
POST {{baseUrl}}/api/battle/stage-info HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "stageId": 1001
}

###

# ì „íˆ¬ ì‹œì‘
# @name battleStart
POST {{baseUrl}}/api/battle/start HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}},
  "stageId": 1001,
  "partyCharacters": [
    {
      "characterId": {{characterId}},
      "position": 1
    }
  ]
}

###

# ì „íˆ¬ ê²°ê³¼ ì œì¶œ
POST {{baseUrl}}/api/battle/submit-result HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "battleId": "{{battleStart.response.body.battleId}}",
  "playerId": {{playerId}},
  "result": "win",
  "clearTime": 45,
  "remainingHp": {
    "{{characterId}}": 850
  },
  "usedSkills": [
    {
      "characterId": {{characterId}},
      "skillId": 2001,
      "useCount": 3
    }
  ]
}

################################
# ì˜¤ë¥˜ í…ŒìŠ¤íŠ¸
################################

# ì¡´ì¬í•˜ì§€ ì•ŠëŠ” API í˜¸ì¶œ
POST {{baseUrl}}/api/nonexistent HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "someData": "value"
}

###

# í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½
POST {{baseUrl}}/api/character/detail HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  
}

###

# ìœ íš¨í•˜ì§€ ì•Šì€ í† í°
POST {{baseUrl}}/api/player/info HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer invalid_token

{
  "playerId": {{playerId}}
}

###

# ë¡œê·¸ì•„ì›ƒ
POST {{baseUrl}}/api/auth/logout HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}}
} 
```   
    

## 4.5 REST Clientë¥¼ í™œìš©í•œ í…ŒìŠ¤íŠ¸ ìë™í™”
ëŒ€ê·œëª¨ ê²Œì„ ì„œë²„ ê°œë°œ í”„ë¡œì íŠ¸ì—ì„œëŠ” API í…ŒìŠ¤íŠ¸ ìë™í™”ê°€ ì¤‘ìš”í•˜ë‹¤. REST Clientë¥¼ í™œìš©í•œ í…ŒìŠ¤íŠ¸ ìë™í™” ë°©ë²•ì„ ì•Œì•„ë³´ì.  

### í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
Node.jsì™€ REST Client CLIë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤:

```javascript
// test-runner.js
const { exec } = require('child_process');
const fs = require('fs');
const path = require('path');
const util = require('util');

const execPromise = util.promisify(exec);
const testDir = path.join(__dirname, 'api-tests');

async function runTests() {
  try {
    // 1. í™˜ê²½ ì„¤ì •
    const env = process.argv[2] || 'development';
    console.log(`Running tests in ${env} environment...`);
    
    // 2. í…ŒìŠ¤íŠ¸ íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
    const files = fs.readdirSync(testDir)
      .filter(file => file.endsWith('.http'))
      .sort((a, b) => {
        // auth.http íŒŒì¼ì„ ê°€ì¥ ë¨¼ì € ì‹¤í–‰
        if (a === 'auth.http') return -1;
        if (b === 'auth.http') return 1;
        return a.localeCompare(b);
      });
    
    // 3. ê° íŒŒì¼ì— ëŒ€í•´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
    const results = [];
    for (const file of files) {
      const filePath = path.join(testDir, file);
      console.log(`Running tests in ${file}...`);
      
      try {
        const { stdout, stderr } = await execPromise(`rest-client ${filePath} --env ${env}`);
        
        if (stderr) {
          console.error(`Error in ${file}:`, stderr);
          results.push({ file, success: false, error: stderr });
        } else {
          console.log(`Tests in ${file} completed successfully.`);
          results.push({ file, success: true });
        }
      } catch (error) {
        console.error(`Error executing ${file}:`, error.message);
        results.push({ file, success: false, error: error.message });
      }
    }
    
    // 4. ê²°ê³¼ ìš”ì•½ ì¶œë ¥
    console.log('\n===== Test Results =====');
    const successCount = results.filter(r => r.success).length;
    console.log(`Passed: ${successCount}/${results.length}`);
    
    const failedTests = results.filter(r => !r.success);
    if (failedTests.length > 0) {
      console.log('\nFailed Tests:');
      failedTests.forEach(test => {
        console.log(`- ${test.file}: ${test.error}`);
      });
      process.exit(1);
    } else {
      console.log('\nAll tests passed!');
    }
  } catch (error) {
    console.error('Error running tests:', error);
    process.exit(1);
  }
}

runTests();
```

### CI/CD íŒŒì´í”„ë¼ì¸ í†µí•©
GitHub Actions ë˜ëŠ” Jenkinsì™€ ê°™ì€ CI/CD ì‹œìŠ¤í…œì— .http íŒŒì¼ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•©í•  ìˆ˜ ìˆë‹¤. ë‹¤ìŒì€ GitHub Actions ì›Œí¬í”Œë¡œìš° ì˜ˆì œë‹¤:

```yaml
# .github/workflows/api-tests.yml
name: API Tests

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest

    services:
      mysql:
        image: mysql:8.0
        env:
          MYSQL_ROOT_PASSWORD: password
          MYSQL_DATABASE: gamedb_test
        ports:
          - 3306:3306
        options: --health-cmd="mysqladmin ping" --health-interval=10s --health-timeout=5s --health-retries=3
      
      redis:
        image: redis:6
        ports:
          - 6379:6379
        options: --health-cmd="redis-cli ping" --health-interval=10s --health-timeout=5s --health-retries=3

    steps:
    - uses: actions/checkout@v2
    
    - name: Setup .NET
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 9.0.x
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '20'
    
    - name: Install REST Client CLI
      run: npm install -g @vscode/restclient
    
    - name: Build and run API
      run: |
        dotnet restore
        dotnet build --no-restore
        dotnet run --project src/GameServer/GameServer.csproj --no-build &
        sleep 10  # ì„œë²„ ì‹œì‘ ëŒ€ê¸°
    
    - name: Run API Tests
      run: node test-runner.js test
```
  

## 4.6 ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ .http íŒŒì¼ í™œìš©
ê²Œì„ ì„œë²„ APIì˜ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ .http íŒŒì¼ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤:  

```http
@baseUrl = https://localhost:5001
@contentType = application/json

# ë¡œê·¸ì¸í•˜ì—¬ í† í° ë°œê¸‰
# @name login
POST {{baseUrl}}/api/auth/login HTTP/1.1
Content-Type: {{contentType}}

{
  "username": "performance_test_user",
  "password": "password123"
}

###

@authToken = {{login.response.body.token}}
@playerId = {{login.response.body.playerId}}

# ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ìºë¦­í„° ëª©ë¡ API í˜¸ì¶œ
# @name characterList
POST {{baseUrl}}/api/character/list HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
  "playerId": {{playerId}}
}

// ì„±ëŠ¥ ì¸¡ì • ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ì´ ìš”ì²­ì„ ì—¬ëŸ¬ ë²ˆ ë°˜ë³µ ì‹¤í–‰í•˜ì—¬ ì‘ë‹µ ì‹œê°„ì„ ì¸¡ì •í•  ìˆ˜ ìˆë‹¤
```

ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸:

```javascript
// performance-test.js
const { exec } = require('child_process');
const fs = require('fs');
const path = require('path');
const util = require('util');

const execPromise = util.promisify(exec);
const performanceTestFile = path.join(__dirname, 'performance-test.http');
const iterations = 100;  // ë°˜ë³µ íšŸìˆ˜

async function runPerformanceTest() {
  console.log(`Running performance test for ${iterations} iterations...`);
  
  const results = [];
  for (let i = 0; i < iterations; i++) {
    const startTime = Date.now();
    
    try {
      await execPromise(`rest-client ${performanceTestFile} --env development`);
      const endTime = Date.now();
      const duration = endTime - startTime;
      
      results.push(duration);
      console.log(`Iteration ${i + 1}/${iterations}: ${duration}ms`);
    } catch (error) {
      console.error(`Error in iteration ${i + 1}:`, error.message);
    }
  }
  
  // ê²°ê³¼ ë¶„ì„
  const totalTime = results.reduce((sum, time) => sum + time, 0);
  const avgTime = totalTime / results.length;
  const minTime = Math.min(...results);
  const maxTime = Math.max(...results);
  
  console.log('\n===== Performance Test Results =====');
  console.log(`Total Iterations: ${results.length}`);
  console.log(`Average Response Time: ${avgTime.toFixed(2)}ms`);
  console.log(`Minimum Response Time: ${minTime}ms`);
  console.log(`Maximum Response Time: ${maxTime}ms`);
}

runPerformanceTest();
```
  

## 4.7 ì •ë¦¬
ì´ ì¥ì—ì„œëŠ” .http íŒŒì¼ì„ ì´ìš©í•œ API í…ŒìŠ¤íŠ¸ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ë‹¤. ì£¼ìš” ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:  

1. **.http íŒŒì¼ ì†Œê°œ ë° ì‘ì„±ë²•**
   - ê¸°ë³¸ ë¬¸ë²•ê³¼ êµ¬ì¡°
   - ë³€ìˆ˜ ì‚¬ìš© ë° í™˜ê²½ ì„¤ì •
   - ë‹¤ì¤‘ ìš”ì²­ ì‘ì„±

2. **REST Client í™•ì¥ í”„ë¡œê·¸ë¨ í™œìš©**
   - ì„¤ì¹˜ ë° ê¸°ë³¸ ê¸°ëŠ¥
   - ë‹¨ì¶•í‚¤ ë° ì‚¬ìš© íŒ
   - ì‘ë‹µ í™•ì¸ ë°©ë²•

3. **API ìš”ì²­/ì‘ë‹µ í…ŒìŠ¤íŠ¸ íŒ¨í„´**
   - ì¸ì¦ í…ŒìŠ¤íŠ¸ íŒ¨í„´
   - ê²Œì„ ë°ì´í„° CRUD í…ŒìŠ¤íŠ¸ íŒ¨í„´
   - ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ íŒ¨í„´

4. **í…ŒìŠ¤íŠ¸ ìë™í™” ë° ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**
   - í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
   - CI/CD íŒŒì´í”„ë¼ì¸ í†µí•©
   - ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ë°©ë²•

.http íŒŒì¼ì€ ê²Œì„ ì„œë²„ API ê°œë°œ ì‹œ íš¨ìœ¨ì ì¸ í…ŒìŠ¤íŠ¸ ë„êµ¬ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. íŠ¹íˆ í´ë¼ì´ì–¸íŠ¸ ê°œë°œ ì—†ì´ë„ ì„œë²„ APIì˜ ê¸°ëŠ¥ì„ ê²€ì¦í•  ìˆ˜ ìˆì–´ ê°œë°œ íš¨ìœ¨ì„±ì„ ë†’ì—¬ì¤€ë‹¤.

ë‹¤ìŒ ì¥ì—ì„œëŠ” MySQLê³¼ Redisë¥¼ í™œìš©í•œ ë°ì´í„° ê´€ë¦¬ì— ëŒ€í•´ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.   
  

